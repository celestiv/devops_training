# ReplicaSet

Начнём данный материал с базовой идеи. В чём отличие Docker от Kubernetes и зачем вообще нужен второй? Docker хорош, но он решает задачу запуска и обеспечения жизненного цикла контейнеров лишь на одном хосте. Kubernetes же позволяет    масштабировать    его    преимущества    на    множество    узлов. Сам Docker предоставляет аналогичный инструмент Docker Swarm, но он обладает гораздо более скудным функционалом и плохо расширяем, поэтому фактически не развивается.

Одной из их важнейших функций является запуск нужного числа реплик контейнера на узлах кластера, доступных в данный момент. И если вдруг какие-то из узлов выйдут из строя, то будет обеспечен перезапуск таких же контейнеров на других живых узлах. Для этой цели используются контроллеры репликации. Их существует несколько видов, каждый из которых обладает своими особенностями и подходит для решения своего круга задач. Наиболее часто используемый называется ReplicaSet (он используется под капотом у Deployment, но при необходимости может быть использован и самостоятельно). Его задача - следить за тем, сколько в данный момент подов, подходящих под нужный селектор, и если их слишком много, то удалять лишние, а если их не хватает, то создавать недостающие из шаблона. При этом существующие поды могут не соответствовать шаблону. За этим ReplicaSet не следит.

ReplicaSet - это такой контроллер репликации, который умеет только поддерживать количество реплик (копий) пода на нужном значении. Если мы задаём ему 3 реплики, то он будет создавать поды с нужной меткой и из заданного образа. Лишние поды с подходящей меткой он удаляет.