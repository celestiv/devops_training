# Базы данных

## Принципы выбора СУБД

1. Prefer boring tech

Нужно выбирать надежные, проверенные инструменты

2. Бэкапы/PITR(Point in time recovery)

Выбираем СУБД, в которой есть встроенные инструменты для создания бэкапов и вохможность откатиться к любому из них

3. Много данных - встроенное шардирование

Нужно встроенное шардирование. Расчитываем на будущее

4. Что с данными делаем(может быть хотим много разных СУБД)

В зависимости от того, какие будут данные и что мы будем с ними делать, 
есть смысл разнести их на разные СУБД, более приспособленные под разные типы задач.
Например, оперативные данные хранить в OLTP базе, а другие в OLAP. 

5. Есть ли истории успеха/неуспеха

6. Безопасность

## Как работают OLTP, OLAP, Valkey(Redis)

[ValKey](https://valkey.io/) это форк проекта Redis, после того как тот стал платным

### Postgres

Клиент подключается к основному процессу- postmaster, который на каждое соединение создает форк процесса backend. Каждый backend обслуживает одно подключение к БД

Это ограничивает количество одновременных подключений неболшим числом, порядка нескльких тысяч

Эту проблему можно решить при помощи connection pool

- pgBouncer

- Odyssey

### ClickHouse

### Valkey

