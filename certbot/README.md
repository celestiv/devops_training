# Учимся работать с certbot

## Что нам нужно

- машина( в данном случае виртуальная, которую я буду создавать в Яндекс облаке)

- регистрация на сервисе [https://www.noip.com/](https://www.noip.com/), который выдает статичный адрес(можно ли это назвать доменом?). К этому адресу монжо привязать IP машины, который мы получим от облачного провайдера. 

- на машину с системой Ubuntu нужно установить certbot и nginx

- нужно подготовить среду для сертификатов. Создать необходимые директории и файлы


## Summary

Судя по [этой](https://habr.com/ru/articles/318952/) статье, все гораздо проще, чем я думал. 

Достаточно один раз сгенерировать сертификат для сайта, а потом настроить автообновление при помощи cron. Главное правильно выполнить первичную настройку, разместить файлы и папки там где нужно. А именно:

- При регистрации letsencrypt пытается проверить, являетесь ли вы действительно владельцем домена, на который хотите получить сертификат. Для этого он делает запрос на страницу, находящуюся за этим доменом. То есть нужно создать файл /var/www/html/.well-known/acme-challenge/index.html. Что в него записать? Пока думаю что достаточно будет hello world. Главное не содержание, а факт того, что ты владеешь доменом, у тебя есть сервер, и ты пытаешься получить сертификат для него. Этого достаточно для получения сертификата

- Нужно настроить nginx, он должен использовать сертификаты, чтобы при переадресации(проксировании) запросов, использовать протокол https, принимать запросы на 443 порт помимо 80

- 

##

##

## Список источников

- [статья на Хабре](https://habr.com/ru/articles/318952/)

- [ACME](https://en.wikipedia.org/wiki/Automatic_Certificate_Management_Environment)

- [блог на сайте f5.com](https://www.f5.com/company/blog/nginx/using-free-ssltls-certificates-from-lets-encrypt-with-nginx)

- [из документации как пользоваться certbot](https://certbot.eff.org/instructions?ws=nginx&os=pip&tab=wildcard)

- [Еще одна инструкция с использованием sed](https://www.alexeykopytko.com/2017/free-ssl-from-letsencrypt/#part-359f55eef5e0cece)
